<div class="conteneur-liste-guides">
  <div class="bloc-recherche">
    <input 
      type="text" 
      class="champ-recherche"
      placeholder="Rechercher un guide..." 
      [(ngModel)]="termeRecherche"
      (input)="changementRecherche(termeRecherche)"
    />
    <button class="bouton-rafraichir" (click)="rafraichir()" title="Rafraîchir">
      Rafraîchir la liste
    </button>
  </div>

  @if (rechercheEnCours) {
    <div class="statut-recherche">
      <span class="point-statut"></span>
      Recherche en cours… je fouille dans mes carnets.
    </div>
  }

  @if (chargementEnCours) {
    <div class="bloc-chargement">
      <div class="animation-rotation"></div>
      <p>Chargement des guides...</p>
    </div>
  }

  @if (erreur) {
    <div class="bloc-erreur">
      <p>{{ erreur }}</p>
      <button (click)="chargerGuides()" class="bouton-reessayer">Réessayer</button>
    </div>
  }

  @if (!chargementEnCours && !erreur) {
    <div class="grille-guides">
      @if (guidesFiltres.length === 0) {
        <div class="aucun-resultat">
          <p>Aucun guide trouvé</p>
        </div>
      }

      @for (guide of guidesFiltres; track guide.id) {
        <article 
          class="carte-guide"
          (click)="afficherDetailsGuide(guide.id)"
        >
          <div class="conteneur-image-guide">
            <img 
              [src]="guide.imageCouverture || imageDefaut" 
              [alt]="guide.titre"
              class="image-guide"
              loading="lazy"
            />
            @if (guide.duree) {
              <div class="badge-duree-guide">
                {{ guide.duree }} jours
              </div>
            }
          </div>
          
          <div class="contenu-guide">
            <h2 class="titre-guide">{{ guide.titre }}</h2>
            @if (guide.destination) {
              <p class="destination-guide">
                {{ guide.destination }}
              </p>
            }
            <p class="description-guide">{{ guide.description }}</p>
            <button class="bouton-consultation">Ouvrir mon carnet →</button>
          </div>
        </article>
      }
    </div>
  }
</div>
